{% extends 'layout.html' %}

{% block content %}

<div class="container">
    <script type="text/javascript">
        async function postData(url, data) {
            const response = await fetch(url, data);
            console.log(data)
            console.log(response)
            return response;
        }

        uploadFile = async () => {
            const fileupload = document.getElementById("fileupload");
            let formData = new FormData();
            formData.append("upload_file", fileupload.files[0]);

            const data = {
                method: "POST",
                body: formData
            };

            const  IP = "{{docker_ip}}";
            const PORT = "{{docker_port}}";

            console.log(IP, PORT)

            const url = "http://" + IP + ":" + PORT + "/upload";
            console.log(url);

            const resp = await postData(url, data)
            console.log(resp)
        }

    </script>

    <p>Pick a file from your file directory to upload to the server ... </p>                          
    <input  id="fileupload" type="file"/>
    <button onclick="uploadFile()" class='btn btn-primary btn-sm'>Upload File</button>

</div>

{% endblock %}